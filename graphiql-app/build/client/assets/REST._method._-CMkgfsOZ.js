import{j as e,r as u,u as E,d as R,e as L}from"./index-D1bDiMWs.js";import{u as z}from"./react-redux-Dc_Wvlqi.js";import{d as C,e as O,a as U,R as V}from"./response-BmMl0x2q.js";import{u as N,B as W}from"./button-Bu6TjWke.js";import{G as I}from"./iconBase-C2oaqpzP.js";import{k as A,l as G,m as J,F as w}from"./components-BWRrkU_f.js";import{a as M}from"./rest-history-slice-BfPXPxgQ.js";import"./redux-toolkit.modern-C1Urj9PA.js";const D="_tabsWrapper_1g7tz_1",Z="_tabsNavigationSection_1g7tz_9",q="_tabNav_1g7tz_15",F="_active_1g7tz_30",K="_tabContentWrapper_1g7tz_35",Q="_tabContent_1g7tz_35",m={tabsWrapper:D,tabsNavigationSection:Z,tabNav:q,active:F,tabContentWrapper:K,tabContent:Q};function $({children:n}){return e.jsx("div",{children:n})}function X({defaultSelect:n=0,children:r}){const{t:a}=N(),[s,l]=u.useState(n),o=d=>{l(d)};return e.jsxs("div",{className:m.tabsWrapper,children:[e.jsx("div",{className:m.tabsNavigationSection,children:u.Children.map(r,({props:{index:d,label:h}})=>e.jsx("button",{type:"button",onClick:()=>o(d),className:s===d?`${m.tabNav} ${m.active}`:m.tabNav,children:a(h)}))}),e.jsx("div",{className:m.tabContentWrapper,children:u.Children.map(r,({props:{index:d,children:h}})=>s===d?e.jsx("div",{className:`${m.tabContent} ${m.active}`,children:h}):null)})]})}function Y(n){return I({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 1.75V3h5.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H8V1.75C8 .784 8.784 0 9.75 0h4.5C15.216 0 16 .784 16 1.75Zm-6.5 0V3h5V1.75a.25.25 0 0 0-.25-.25h-4.5a.25.25 0 0 0-.25.25ZM4.997 6.178a.75.75 0 1 0-1.493.144L4.916 20.92a1.75 1.75 0 0 0 1.742 1.58h10.684a1.75 1.75 0 0 0 1.742-1.581l1.413-14.597a.75.75 0 0 0-1.494-.144l-1.412 14.596a.25.25 0 0 1-.249.226H6.658a.25.25 0 0 1-.249-.226L4.997 6.178Z"},child:[]},{tag:"path",attr:{d:"M9.206 7.501a.75.75 0 0 1 .793.705l.5 8.5A.75.75 0 1 1 9 16.794l-.5-8.5a.75.75 0 0 1 .705-.793Zm6.293.793A.75.75 0 1 0 14 8.206l-.5 8.5a.75.75 0 0 0 1.498.088l.5-8.5Z"},child:[]}]})(n)}const ee="_goTrashIcon_1mid8_1",te="_inputSection_1mid8_6",se="_inputStyle_1mid8_11",ae="_headersList_1mid8_25",ne="_headersWrapper_1mid8_31",re="_tableHeaders_1mid8_42",b={goTrashIcon:ee,inputSection:te,inputStyle:se,headersList:ae,headersWrapper:ne,tableHeaders:re};function oe(n){return Object.entries(Object.fromEntries(new URLSearchParams(n))).map(r=>r.reduce((a,s,l)=>(l===0&&(a["header-key"]=s),l===1&&(a["header-value"]=s),a),{}))}function ce({outerSetHeader:n}){const r=E(),a=()=>oe(r.search),{t:s}=N(),[,l]=A(),[o,d]=u.useState(a),h=()=>{d([...o,{"header-key":"","header-value":""}])},S=t=>t.reduce((c,p)=>{if(p["header-key"]){const f=p["header-key"];c[f]=p["header-value"]}return c},{}),_=(t,i)=>{const{name:c,value:p}=i.currentTarget,f=o.map((x,T)=>T===t?{...x,[c]:p}:x);d(f)},j=t=>{d(o.filter((i,c)=>c!==t))};return u.useEffect(()=>{n(JSON.stringify(S(o))),l(JSON.parse(JSON.stringify(S(o))))},[o,n,l,r.search]),e.jsxs("div",{className:b.headersWrapper,children:[e.jsx(W,{btnType:"button",onClick:h,children:s("AddHeader")}),o.length>0&&e.jsxs("div",{className:b.tableHeaders,children:[e.jsx("p",{children:s("Key")}),e.jsx("p",{children:s("Value")})]}),e.jsx("div",{"aria-live":"polite",role:"rowgroup",className:b.headersList,children:o.map((t,i)=>e.jsxs("div",{className:b.inputSection,children:[e.jsx("input",{className:b.inputStyle,type:"text",name:"header-key","aria-label":"header-key",value:t["header-key"],onChange:c=>{_(i,c)}}),e.jsx("input",{className:b.inputStyle,type:"text",name:"header-value","aria-label":"header-value",value:t["header-value"],onChange:c=>{_(i,c)}}),e.jsx("button",{type:"button","aria-label":"trash-btn",className:b.goTrashIcon,onClick:()=>{j(i)},children:e.jsx(Y,{color:"#e9c2c5"})})]},`index-id-${i}`))})]})}function P(n){return n?n.split("/").reduce((r,a,s)=>({...r,[s===0?"url":"body"]:a}),{}):{}}const ie="_editorWrapper_1sqom_1",le={editorWrapper:ie};function de({setBody:n,setHeaders:r,params:a}){const s=R(),l=E(),o=u.useRef(null),d=t=>{t&&n(t)},h=()=>o.current?o.current.getValue():"",S=t=>{o.current&&o.current.setValue(t)},_=t=>{var i,c;o.current=t,t.setValue(((i=a["*"])==null?void 0:i.split("/")[1])!==void 0?C((c=a["*"])==null?void 0:c.split("/")[1]):"")};u.useEffect(()=>{var t,i,c,p;if(a["*"]){a["*"].split("/").length>2&&s("/errorPage");try{n(((t=a["*"])==null?void 0:t.split("/")[1])!==void 0?C((i=a["*"])==null?void 0:i.split("/")[1]):""),S(((c=a["*"])==null?void 0:c.split("/")[1])!==void 0?C((p=a["*"])==null?void 0:p.split("/")[1]):"")}catch(f){f instanceof Error&&s("/error")}}},[a,s,n]);const{t:j}=N();return e.jsxs(X,{defaultSelect:0,children:[e.jsx($,{label:j("Body"),index:0,children:e.jsx("div",{className:le.editorWrapper,"data-testid":"editorWrapper",onBlur:()=>{const t=P(a["*"]);t.body=O(h());const i=Object.keys(t).includes("url")?Object.values(t).join("/"):Object.values(Object.assign({url:""},t)).join("/");s(`/REST/${a.method}/${i}${l.search}`)},children:e.jsx(U,{theme:"vs-dark",loading:"Loading...",height:"30vh",defaultLanguage:"json",onChange:d,onMount:_})})}),e.jsx($,{label:j("Headers"),index:1,children:e.jsx(ce,{outerSetHeader:r})})]})}const ue="_container_zvf35_1",he="_title_zvf35_13",pe="_RestBlock_zvf35_17",me="_methodSection_zvf35_25",ve="_formAction_zvf35_31",_e="_methodBlock_zvf35_37",fe="_customSelect_zvf35_48",ge="_inputUrl_zvf35_86",v={container:ue,title:he,RestBlock:pe,methodSection:me,formAction:ve,methodBlock:_e,customSelect:fe,inputUrl:ge};function Ee(){const n=R(),r=L(),a=G(),s=J(),l=E(),[o,d]=u.useState(a.method||"GET"),[h,S]=u.useState(a.url||""),[_,j]=u.useState(""),[t,i]=u.useState(""),{t:c}=N(),p=z(),f=(s==null?void 0:s.data)||"",x=(s==null?void 0:s.status)||null,T=(s==null?void 0:s.error)||null,B=async()=>{const g=new Date().toISOString(),y={url:h,method:o,headers:_,body:o!=="GET"?t:void 0},H={urlPage:`${l.pathname}${l.search}`.replace("/REST/",""),requestData:y,data:g};p(M([H]))};return u.useEffect(()=>{r["*"]&&r["*"].split("/").length>2&&n("/errorPage")},[r.method,r,n,a.url]),e.jsxs("div",{className:v.container,children:[e.jsxs("div",{className:v.RestBlock,children:[e.jsx("h2",{className:v.title,children:c("RESTClient")}),e.jsx("div",{className:v.methodSection,children:e.jsxs(w,{className:v.formAction,method:"post",action:`/REST/${o}/${r["*"]}${l.search}`,children:[e.jsxs("div",{className:v.methodBlock,children:[e.jsxs("select",{name:"method",className:v.customSelect,value:o,onChange:g=>{n(`/REST/${g.target.value}/${r["*"]}${l.search}`),d(g.target.value)},children:[e.jsx("option",{value:"GET",children:"GET"}),e.jsx("option",{value:"POST",children:"POST"}),e.jsx("option",{value:"PUT",children:"PUT"}),e.jsx("option",{value:"DELETE",children:"DELETE"})]}),e.jsx("input",{"aria-label":"url-input",className:v.inputUrl,type:"text",name:"url",value:h,onChange:g=>{const y=P(r["*"]);y.url=O(g.target.value);const k=Object.values(y).join("/");n(`/REST/${r.method}/${k}${l.search}`),S(g.target.value)}})]}),e.jsx("input",{type:"hidden",name:"headers",value:_}),e.jsx("input",{type:"hidden",name:"body",value:t}),e.jsx(W,{btnType:"submit",onClick:B,children:c("Send")})]})}),e.jsx(de,{params:r||{},setHeaders:j,setBody:i})]}),e.jsx(V,{responseStatus:x,response:JSON.stringify(f,null,2),error:T,title:c("Response")})]})}export{Ee as default};
